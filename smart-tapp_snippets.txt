
    public static function cacheableDatabaseQuery(?bool $use_auth_id = true): static
    {
        dd(static::query());

        if (Cache::has(static::cacheKey($use_auth_id))) {
            // check cache first
            // is value present?
            // Yes: retrieve from cache
            // No: retrieve from database
            return Cache::remember(static::cacheKey($use_auth_id), 15, function () {
                return static::query();
            });
        }

        return static::query();
    }

    public function cacheKey(?bool $use_auth_id = true): string
    {
        // if auth_id is passed in use it else try to resolve using auth()->id else set to empty string
        $auth_id = $use_auth_id ? auth()?->id() : '';

        // if auth_id has a value return eg: accesses/{auth_id}/1515650910
        // else return eg: accesses/1515650910
        return sprintf(
            "%s/%s%s",
            $this->getTable(),
            $auth_id . '/',
            $this->updated_at->timestamp
        );
    }

    if (method_exists(static::getModel(), 'driver') && method_exists(static::getModel(), 'vehicle')) {
        dd('hm',  $this->form->getLivewire()->data, $data);
    }

    {
        // I] after sending a notification, save the:
        //      1. message_id of the notification from the response of the network call to the API
        //      2. the response of the network call to the API
        //      3. the notification and notifiable 
        //      4. the tenant->id
        //      5. the admin user->id
        // to redis with proper tagging based on time period of 5 minutes interval.
        // ======================================================================

        // A - II] when delivery report returns from the API,
        // use the message_id from the request body to retrieve the metadata of the notification from redis
        // deliver the response the correct user in the correct tenant through webhook

        // B - II] 
        // after sending a notification, 
        // [] save the message_id from the response to the data column of the notification in the notifications table:[set the status to sending]
        // [âœ“] if network failure occurs, set the status of the notification to failed in the notifications table:
        // when delivery report returns from the API,
        //      [] use the message_id from the request body to retrieve and update the status of the notification to whatever status 
        //      [] in the response in the notification's table.
        // [] check the notifications table every 5 minutes to know if any sms activation notification has been updated
        // [] if so, dispatch a filament notification for each
    }

    {
        // issued - [Activate (default do not Send)], Deactivate, Send access activation notification
        // active - Deactivate, Send access activation notification
        // expired - Deactivate, [Issue (default Send), Activate (default do not Send)] -> Send access activation notification,
        // inactive|deactivated - [Issue (default Send), Activate (default Send)] -> shows modal for Send access activation notification confirmation
    }

    <div>
      <x-notification-card class="bg-white border-b border-gray-200 rounded dark:border-gray-700" :action="false">
        <x-slot:icon>
          <div tabindex="0" aria-label="group icon" role="img" class="flex items-center justify-center flex-shrink-0 w-8 h-8 border border-gray-200 rounded-full focus:outline-none">
            <img src="https://tuk-cdn.s3.amazonaws.com/can-uploader/notification_1-svg2.svg" alt="icon" />
          </div>
        </x-slot>
        <x-slot:body>
          <p tabindex="0" class="text-sm leading-tight focus:outline-none"><span class="text-indigo-700">James Doe</span> favourited an <span class="text-indigo-700">item</span></p>
          <p tabindex="0" class="pt-1 text-xs leading-3 text-gray-500 focus:outline-none">2 hours ago</p>
        </x-slot>
      </x-notification-card>

      <x-notification-card class="bg-white border-b border-gray-200 rounded dark:border-gray-700" :action="false">
        <x-slot:icon>
          <div tabindex="0" aria-label="group icon" role="img" class="flex items-center justify-center flex-shrink-0 w-8 h-8 border border-gray-200 rounded-full focus:outline-none">
            <img src="https://tuk-cdn.s3.amazonaws.com/can-uploader/notification_1-svg5.svg" alt="icon" />
          </div>
        </x-slot>
        <x-slot:body>
          <p tabindex="0" class="text-sm leading-tight focus:outline-none"><span class="text-indigo-700">Sarah</span> posted in the thread: <span class="text-indigo-700">Update gone wrong</span></p>
          <p tabindex="0" class="pt-1 text-xs leading-3 text-gray-500 focus:outline-none">2 hours ago</p>
        </x-slot>
      </x-notification-card>

      <x-notification-card class="bg-white border-b border-gray-200 rounded dark:border-gray-700" :action="false">
        <x-slot:icon>
          <div tabindex="0" aria-label="group icon" role="img" class="flex items-center justify-center flex-shrink-0 w-8 h-8 border border-gray-200 rounded-full focus:outline-none">
            <img src="https://tuk-cdn.s3.amazonaws.com/can-uploader/notification_1-svg7.svg" alt="icon" />
          </div>
        </x-slot>
        <x-slot:body>
          <p tabindex="0" class="text-sm leading-tight focus:outline-none">Shipment delayed for order<span class="text-indigo-700"> #25551</span></p>
          <p tabindex="0" class="pt-1 text-xs leading-3 text-gray-500 focus:outline-none">2 hours ago</p>
        </x-slot>
      </x-notification-card>

      <x-notification-card class="flex items-center border-b border-gray-200 rounded bg-danger-100 dark:border-gray-700" :action="false">
        <x-slot:icon>
          <div tabindex="0" aria-label="storage icon" role="img" class="flex items-center justify-center flex-shrink-0 w-8 h-8 border rounded-full border-danger-200 focus:outline-none">
            <img src="https://tuk-cdn.s3.amazonaws.com/can-uploader/notification_1-svg6.svg" alt="icon" />
          </div>
        </x-slot>
        <x-slot:body>
          <p tabindex="0" class="text-sm leading-tight text-danger-700 focus:outline-none">Low on storage: 2.5/32gb remaining</p>
        </x-slot>

        <x-slot:action>
          <p tabindex="0" class="text-xs leading-3 text-right underline cursor-pointer text-danger-700 focus:outline-none">Manage</p>
        </x-slot>
      </x-notification-card>

      <x-notification-card class="bg-white rounded shadow">
        <x-slot:icon>
          <div tabindex="0" aria-label="group icon" role="img" class="flex items-center justify-center flex-shrink-0 w-8 h-8 border border-gray-200 rounded-full focus:outline-none">
            <img src="https://tuk-cdn.s3.amazonaws.com/can-uploader/notification_1-svg3.svg" alt="icon">
          </div>
        </x-slot>
        <x-slot:body>
          <p tabindex="0" class="text-sm leading-tight focus:outline-none"><span class="text-primary-700">Sash</span> added you to the group: <span class="text-primary-700">UX Designers</span></p>
          <p tabindex="0" class="pt-1 mt-1 text-xs leading-3 text-gray-500 focus:outline-none">2 hours ago</p>
        </x-slot>
      </x-notification-card>

      <h2 tabindex="0" class="pt-8 pb-2 text-sm leading-normal text-gray-600 border-b border-gray-300 focus:outline-none">YESTERDAY</h2>
      
      <x-notification-card class="bg-white border-b border-gray-200 rounded dark:border-gray-700" :action="false">
        <x-slot:icon>
          <div tabindex="0" aria-label="group icon" role="img" class="flex items-center justify-center flex-shrink-0 w-8 h-8 border border-gray-200 rounded-full focus:outline-none">
            <img src="https://tuk-cdn.s3.amazonaws.com/can-uploader/notification_1-svg2.svg" alt="icon" />
          </div>
        </x-slot>
        <x-slot:body>
          <p tabindex="0" class="text-sm leading-tight focus:outline-none"><span class="text-indigo-700">James Doe</span> favourited an <span class="text-indigo-700">item</span></p>
          <p tabindex="0" class="pt-1 text-xs leading-3 text-gray-500 focus:outline-none">2 hours ago</p>
        </x-slot>
      </x-notification-card>

      <x-notification-card class="bg-white border-b border-gray-200 rounded dark:border-gray-700" :action="false">
        <x-slot:icon>
          <div tabindex="0" aria-label="group icon" role="img" class="flex items-center justify-center flex-shrink-0 w-8 h-8 border border-gray-200 rounded-full focus:outline-none">
            <img src="https://tuk-cdn.s3.amazonaws.com/can-uploader/notification_1-svg5.svg" alt="icon" />
          </div>
        </x-slot>
        <x-slot:body>
          <p tabindex="0" class="text-sm leading-tight focus:outline-none"><span class="text-indigo-700">Sarah</span> posted in the thread: <span class="text-indigo-700">Update gone wrong</span></p>
          <p tabindex="0" class="pt-1 text-xs leading-3 text-gray-500 focus:outline-none">2 hours ago</p>
        </x-slot>
      </x-notification-card>

      <x-notification-card class="bg-white border-b border-gray-200 rounded dark:border-gray-700" :action="false">
        <x-slot:icon>
          <div tabindex="0" aria-label="group icon" role="img" class="flex items-center justify-center flex-shrink-0 w-8 h-8 border border-gray-200 rounded-full focus:outline-none">
            <img src="https://tuk-cdn.s3.amazonaws.com/can-uploader/notification_1-svg7.svg" alt="icon" />
          </div>
        </x-slot>
        <x-slot:body>
          <p tabindex="0" class="text-sm leading-tight focus:outline-none">Shipment delayed for order<span class="text-indigo-700"> #25551</span></p>
          <p tabindex="0" class="pt-1 text-xs leading-3 text-gray-500 focus:outline-none">2 hours ago</p>
        </x-slot>
      </x-notification-card>

      <x-notification-card class="flex items-center border-b border-gray-200 rounded bg-success-100 dark:border-gray-700" :action="false">
        <x-slot:icon>
          <div tabindex="0" aria-label="success icon" role="img" class="flex items-center justify-center flex-shrink-0 w-8 h-8 border rounded-full border-success-200 focus:outline-none">
            <img src="https://tuk-cdn.s3.amazonaws.com/can-uploader/notification_1-svg11.svg" alt="icon" />
          </div>
        </x-slot>
        <x-slot:body>
          <p tabindex="0" class="text-sm leading-tight text-success-700 focus:outline-none">Design sprint completed</p>
        </x-slot>

        <x-slot:action>
          <p tabindex="0" class="text-xs leading-3 underline cursor-pointer text-success-700 focus:outline-none focus:text-indigo-600">View</p>
        </x-slot>
      </x-notification-card>

      <div class="flex items-center justiyf-between">
        <hr class="w-full">
        <p tabindex="0" class="flex flex-shrink-0 px-3 py-16 text-sm leading-normal text-gray-500 focus:outline-none">Thats it for now :)</p>
        <hr class="w-full">
      </div>
    </div>

                <div x-data class="relative">
                <x-filament-support::icon-button
                    x-on:click="$refs.panel_2.toggle"
                    :dark-mode="$darkMode"
                    icon="heroicon-o-dots-vertical"
                    class="-my-2"
                >
                    <x-slot name="label">
                        trigger
                    </x-slot>
                </x-filament-support::icon-button>

                <div
                    x-ref="panel_2"
                    x-transition
                    x-cloak
                    x-float.placement.bottom-end.flip.offset.shift.teleport="{ offset: 8 }"
                    @class([
                        'filament-action-group-dropdown absolute hidden z-20 border-t-2 shadow-xl ring-1 ring-gray-900/10 overflow-hidden w-52',
                        'dark:ring-white/20' => $darkMode,
                    ])
                >
                    <ul @class([
                        'py-1 space-y-1 bg-white shadow',
                        'dark:bg-gray-700 dark:divide-gray-600' => $darkMode,
                    ])>
                      <li>
                        <button type="button" class="w-full">
                            <span class="">
                                Mark As Read
                            </span>
                        </button>
                      </li>
                    </ul>
                </div>
              </div>

| id                                   | data                                                                                     | created_at          |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------+
| 5ffb3eb7-38c6-46f1-9f12-cbf13608ddba | {"admin_id":1,"access_id":1,"notification":"O:60:\"App\\Notifications\\Tenant\\Driver\\AccessActivationNotification\":5:{s:6:\"access\";O:45:\"Illuminate\\Contracts\\Database\\ModelIdentifier\":5:{s:5:\"class\";s:24:\"App\\Models\\Tenant\\Access\";s:2:\"id\";i:1;s:9:\"relations\";a:2:{i:0;s:7:\"vehicle\";i:1;s:6:\"driver\";}s:10:\"connection\";s:6:\"tenant\";s:15:\"collectionClass\";N;}s:5:\"admin\";O:45:\"Illuminate\\Contracts\\Database\\ModelIdentifier\":5:{s:5:\"class\";s:22:\"App\\Models\\Tenant\\User\";s:2:\"id\";i:1;s:9:\"relations\";a:0:{}s:10:\"connection\";s:6:\"tenant\";s:15:\"collectionClass\";N;}s:20:\"checkStatusCountdown\";i:30;s:2:\"id\";s:36:\"5ffb3eb7-38c6-46f1-9f12-cbf13608ddba\";s:11:\"afterCommit\";b:1;}","checkStatusCountdown":30,"status":"success","response":{"SMSMessageData":{"Message":"Sent to 1\/1 Total Cost: NGN 2.2000","Recipients":[{"cost":"NGN 2.2000","messageId":"ATXid_146f4abb4a66f0ea2e148b407846546a","messageParts":1,"number":"+2347067103481","status":"Success","statusCode":101}]}}} | 2023-02-22 16:49:06 |
| 76223d98-3768-49dd-9bba-4ba86ac15195 | {"admin_id":1,"repark_request_id":1,"notification":"O:63:\"App\\Notifications\\Tenant\\Driver\\ShouldReparkVehicleNotification\":5:{s:13:\"reparkRequest\";O:45:\"Illuminate\\Contracts\\Database\\ModelIdentifier\":5:{s:5:\"class\";s:31:\"App\\Models\\Tenant\\ReparkRequest\";s:2:\"id\";i:1;s:9:\"relations\";a:1:{i:0;s:13:\"blockerDriver\";}s:10:\"connection\";s:6:\"tenant\";s:15:\"collectionClass\";N;}s:5:\"admin\";O:45:\"Illuminate\\Contracts\\Database\\ModelIdentifier\":5:{s:5:\"class\";s:22:\"App\\Models\\Tenant\\User\";s:2:\"id\";i:1;s:9:\"relations\";a:0:{}s:10:\"connection\";s:6:\"tenant\";s:15:\"collectionClass\";N;}s:20:\"checkStatusCountdown\";i:30;s:2:\"id\";s:36:\"76223d98-3768-49dd-9bba-4ba86ac15195\";s:11:\"afterCommit\";b:1;}","checkStatusCountdown":30} | 2023-02-22 17:49:15 |
| 9ee84c8f-d81a-4ea2-bace-85c862aef4a0 | {"admin_id":1,"access_id":2,"notification":"O:60:\"App\\Notifications\\Tenant\\Driver\\AccessActivationNotification\":5:{s:6:\"access\";O:45:\"Illuminate\\Contracts\\Database\\ModelIdentifier\":5:{s:5:\"class\";s:24:\"App\\Models\\Tenant\\Access\";s:2:\"id\";i:2;s:9:\"relations\";a:8:{i:0;s:6:\"driver\";i:1;s:7:\"vehicle\";i:2;s:10:\"parkingLot\";i:3;s:19:\"parkingLot.accesses\";i:4;s:7:\"creator\";i:5;s:13:\"creator.roles\";i:6;s:6:\"issuer\";i:7;s:12:\"issuer.roles\";}s:10:\"connection\";s:6:\"tenant\";s:15:\"collectionClass\";N;}s:5:\"admin\";O:45:\"Illuminate\\Contracts\\Database\\ModelIdentifier\":5:{s:5:\"class\";s:22:\"App\\Models\\Tenant\\User\";s:2:\"id\";i:1;s:9:\"relations\";a:1:{i:0;s:5:\"roles\";}s:10:\"connection\";s:6:\"tenant\";s:15:\"collectionClass\";N;}s:20:\"checkStatusCountdown\";i:30;s:2:\"id\";s:36:\"9ee84c8f-d81a-4ea2-bace-85c862aef4a0\";s:11:\"afterCommit\";b:1;}","checkStatusCountdown":30,"status":"success","response":{"SMSMessageData":{"Message":"Sent to 1\/1 Total Cost: NGN 4.4000","Recipients":[{"cost":"NGN 4.4000","messageId":"ATXid_5fb00def8f588654830bd7b357a698c8","messageParts":2,"number":"+2348032710226","status":"Success","statusCode":101}]}}} | 2023-02-22 16:25:08 |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------+

| 8f942334-9804-4408-bef8-ba184d560ab3 | {"admin_id":1,"access_id":1,"notification":"O:60:\"App\\Notifications\\Tenant\\Driver\\AccessActivationNotification\":5:{s:6:\"access\";O:45:\"Illuminate\\Contracts\\Database\\ModelIdentifier\":5:{s:5:\"class\";s:24:\"App\\Models\\Tenant\\Access\";s:2:\"id\";i:1;s:9:\"relations\";a:1:{i:0;s:6:\"driver\";}s:10:\"connection\";s:6:\"tenant\";s:15:\"collectionClass\";N;}s:5:\"admin\";O:45:\"Illuminate\\Contracts\\Database\\ModelIdentifier\":5:{s:5:\"class\";s:22:\"App\\Models\\Tenant\\User\";s:2:\"id\";i:1;s:9:\"relations\";a:0:{}s:10:\"connection\";s:6:\"tenant\";s:15:\"collectionClass\";N;}s:20:\"checkStatusCountdown\";i:30;s:2:\"id\";s:36:\"8f942334-9804-4408-bef8-ba184d560ab3\";s:11:\"afterCommit\";b:1;}","checkStatusCountdown":30,"status":"success","response":{"SMSMessageData":{"Message":"Sent to 1\/1 Total Cost: NGN 2.2000","Recipients":[{"cost":"NGN 2.2000","messageId":"ATXid_9559909b5cae9846a983cc68f952c8f1","messageParts":1,"number":"+2349037198917","status":"Success","statusCode":101}]}}}                | NULL    | 2023-07-08 12:35:22 | 2023-07-08 12:35:22 |
| bab65956-f816-4030-95ad-a465fa3f5a6b | {"admin_id":1,"access_id":1,"notification":"O:60:\"App\\Notifications\\Tenant\\Driver\\AccessActivationNotification\":5:{s:6:\"access\";O:45:\"Illuminate\\Contracts\\Database\\ModelIdentifier\":5:{s:5:\"class\";s:24:\"App\\Models\\Tenant\\Access\";s:2:\"id\";i:1;s:9:\"relations\";a:1:{i:0;s:6:\"driver\";}s:10:\"connection\";s:6:\"tenant\";s:15:\"collectionClass\";N;}s:5:\"admin\";O:45:\"Illuminate\\Contracts\\Database\\ModelIdentifier\":5:{s:5:\"class\";s:22:\"App\\Models\\Tenant\\User\";s:2:\"id\";i:1;s:9:\"relations\";a:0:{}s:10:\"connection\";s:6:\"tenant\";s:15:\"collectionClass\";N;}s:20:\"checkStatusCountdown\";i:30;s:2:\"id\";s:36:\"bab65956-f816-4030-95ad-a465fa3f5a6b\";s:11:\"afterCommit\";b:1;}","checkStatusCountdown":30,"status":"success","response":{"SMSMessageData":{"Message":"Sent to 1\/1 Total Cost: NGN 2.2000","Recipients":[{"cost":"NGN 2.2000","messageId":"ATXid_daf16e644dbc676e8bba1e97d88bd407","messageParts":1,"number":"+2349037198917","status":"Success","statusCode":101}]}}}                | NULL    | 2023-07-08 12:49:03 | 2023-07-08 12:49:03 |